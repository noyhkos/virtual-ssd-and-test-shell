# Virtual SSD and Test Shell

**ê°€ìƒ SSDì™€ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì»¤ìŠ¤í…€ ì…¸ ê°œë°œ í”„ë¡œì íŠ¸**

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

- **ìš´ì˜ì²´ì œ**: Ubuntu 20.04  
- **ì–¸ì–´**: C (gcc), Shell Script (bash)  
- **ë””ë ‰í† ë¦¬**: `~/ssdTest/`  
- **í•µì‹¬ íŒŒì¼**: `ssd.c`, `TestShell.c`, `nand.txt`, `result.txt`, `testScript`

---

## 2. í”„ë¡œì íŠ¸ ì„¤ëª…

- ê°€ìƒ SSD í”„ë¡œê·¸ë¨ì€ íŒŒì¼ ì…ì¶œë ¥ì„ í†µí•´ `nand.txt`ì™€ `result.txt`ë¥¼ ì¡°ì‘í•œë‹¤.
- TestShellì„ í†µí•´ ì‚¬ìš©ìê°€ SSDì— ëª…ë ¹ì„ ë³´ë‚´ê³  ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
- SSDëŠ” ë§¤ìš° ë‹¨ìˆœí•œ êµ¬ì¡°ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´ C ê¸°ë°˜ ì…ì¶œë ¥ í•™ìŠµì— ì í•©í•˜ë‹¤.

---

## 3. ì£¼ìš” ê¸°ëŠ¥

### ğŸ”¹ 3.1. `ssd.c`

- 4Byte ë‹¨ìœ„ Logical Block
- LBA 0~99 ì´ 100ê°œ (ì´ 400Byte)
- ëª…ë ¹ì–´:
  - `W` (Write): `ssd W 33 0x12345678` â†’ 33ë²ˆ ì˜ì—­ì— 0x12345678 ì €ì¥
  - `R` (Read) : `ssd R 33` â†’ 33ë²ˆ ì˜ì—­ ê°’ result.txtì— ì €ì¥
- **ì…ë ¥ ì¸ì**:  
  - `LBA`: 0~99 (10ì§„ìˆ˜)  
  - `DATA`: 0xë¡œ ì‹œì‘í•˜ëŠ” 8ìë¦¬ 16ì§„ìˆ˜ (ì˜ˆ: `0x1234ABCD`)

---

### ğŸ”¹ 3.2. `nand.txt`

- SSD ì €ì¥ ê³µê°„ (100ê°œì˜ 4Byte ë¸”ë¡ = 400Byte)
- ì´ˆê¸°ê°’: ëª¨ë“  bit 0

### ğŸ”¹ 3.3. `result.txt`

- R ëª…ë ¹ ê²°ê³¼ê°’ ì €ì¥ (4Byte)
- ìƒˆë¡œìš´ R ëª…ë ¹ë§ˆë‹¤ ì´ˆê¸°í™”ë¨

---

### ğŸ”¹ 3.4. `driver.c`

- ì‚¬ìš©ìê°€ ì§ì ‘ ëª…ë ¹ì–´ ì…ë ¥ (ì»¤ë§¨ë“œ ì…¸ ì—­í• )
- ì§€ì› ëª…ë ¹ì–´:
  - `write [LBA] [0xDATA]`  
  - `read [LBA]`
  - `fullwrite [0xDATA]`
  - `fullread`
  - `help`
  - `exit`
  - `testapp1`
  - `testapp2`
- ê¸°íƒ€:
  - ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ëª…ë ¹ì–´: `"INVALID COMMAND"` ì¶œë ¥
  - ì…ë ¥ í¬ë§· ê²€ì‚¬ ì—„ê²©
  - **Segmentation Fault ì ˆëŒ€ ê¸ˆì§€**

---

### ğŸ”¹ 3.5. `testApp.c`

- ì…¸ ë‚´ë¶€ì—ì„œ ìë™ í…ŒìŠ¤íŠ¸ ìˆ˜í–‰ìš© API ì œê³µ

#### ğŸ“Œ `testapp1`

1. ì „ì²´ ì˜ì—­ `0x1234ABCD`ë¡œ `fullwrite`  
2. `fullread` ê²°ê³¼ í™•ì¸  
3. ì„±ê³µ ì—¬ë¶€ ì¶œë ¥

#### ğŸ“Œ `testapp2`

1. LBA 0~10ì— `0xAAAABBBB` 50ë²ˆì”© write  
2. ë™ì¼ ìœ„ì¹˜ì— `0x12345678` write  
3. readë¡œ ê²°ê³¼ í™•ì¸ í›„ ì¼ì¹˜ ì—¬ë¶€ íŒë‹¨  
4. ì„±ê³µ ì—¬ë¶€ ì¶œë ¥

---

## 4. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
virtual-ssd-driver/
â”œâ”€â”€ ssd/
â”‚ â”œâ”€â”€ src/
â”‚ â”‚ â”œâ”€â”€ ssd.c
â”‚ â”‚ â”œâ”€â”€ cmd_read.c
â”‚ â”‚ â”œâ”€â”€ cmd_write.c
â”‚ â”œâ”€â”€ includes/
â”‚ â”‚ â”œâ”€â”€ ssd_common.h
â”‚ â”‚ â”œâ”€â”€ nand_cmd.h
â”‚ â”œâ”€â”€ data/
â”‚ â”‚ â”œâ”€â”€ nand.txt # 100 blocks x 4 bytes
â”‚ â”‚ â”œâ”€â”€ result.txt # latest read result
â”‚ â”œâ”€â”€ Makefile
â”‚ â””â”€â”€ ssd # ì‹¤í–‰íŒŒì¼

â”œâ”€â”€ driver/
â”‚ â”œâ”€â”€ src/
â”‚ â”‚ â”œâ”€â”€ main.c
â”‚ â”‚ â”œâ”€â”€ driver_write.c
â”‚ â”‚ â”œâ”€â”€ driver_read.c
â”‚ â”‚ â”œâ”€â”€ driver_fullwrite.c
â”‚ â”‚ â”œâ”€â”€ driver_fullread.c
â”‚ â”‚ â”œâ”€â”€ testApp.c
â”‚ â”œâ”€â”€ includes/
â”‚ â”‚ â”œâ”€â”€ driver_common.h
â”‚ â”‚ â”œâ”€â”€ driver_command.h
â”‚ â”œâ”€â”€ Makefile
â”‚ â””â”€â”€ driver # ì‹¤í–‰íŒŒì¼
```

---

## 5. ë¹Œë“œ ë°©ë²•

```
bash
# SSD ë¹Œë“œ
cd ssd
make

# Driver ë¹Œë“œ
cd ../driver
make
```
